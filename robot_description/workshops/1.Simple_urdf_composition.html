<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SIMPLE COMPOSITION &mdash; ROS2 Manipulation Workshop  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ROBOT WORKCELL COMPOSITION" href="2.Robot_workcell_composition.html" />
    <link rel="prev" title="DEVELOPMENT ENVIRONEMNT SETUP" href="../../tech_setup/workshops/0.Setup_Environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ROS2 Manipulation Workshop
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tech_setup/workshops/0.Setup_Environment.html">DEVELOPMENT ENVIRONEMNT SETUP</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SIMPLE COMPOSITION</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-urdf-file">1. Create a URDF file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-the-tree-structure">2. Create the tree structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-dimensions">3. Add dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#completing-the-kinematics">4. Completing the kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cleanup">Cleanup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2.Robot_workcell_composition.html">ROBOT WORKCELL COMPOSITION</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moveit/workshops/1.Setup_assistant.html">MOVEIT SETUP ASSISTANT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moveit/workshops/2.Connecting_real_hardware.html">CONNECTING REAL HARDWARE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moveit/workshops/3.Simple_pick_n_place.html">SIMPLE PICK &amp; PLACE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS2 Manipulation Workshop</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SIMPLE COMPOSITION</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/robot_description/workshops/1.Simple_urdf_composition.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="simple-composition">
<h1>SIMPLE COMPOSITION<a class="headerlink" href="#simple-composition" title="Permalink to this heading"></a></h1>
<p>Contents:</p>
<ul class="simple">
<li><p>Create a URDF file</p></li>
<li><p>Create a tree structure</p></li>
<li><p>Add dimensions</p></li>
<li><p>Complete kinemtatics</p></li>
</ul>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>This tutorial explains the basics of how to describe industrial robots in ROS and how to use
the created kinematic models.
You will learn about the Unified Robot Description Format
(URDF). The tutorial will inform about how to create a robot model and how to visualize your
robot.</p>
</section>
<section id="create-a-urdf-file">
<h2>1. Create a URDF file<a class="headerlink" href="#create-a-urdf-file" title="Permalink to this heading"></a></h2>
<p>A URDF file is created in the XML format. URDFs contain information about the robot links
and joints. For detailed information about this format check the following link:
http://wiki.ros.org/urdf/XML</p>
<p>Figure 1 shows a simple kinematics that can be built using URDF.</p>
<p><img alt="Figure 1" src="../../_images/simple-model.png" />
Figure 1: Serial kinematics sketch</p>
<p>It is a simple kinematics existing of two links connected via a continuous rotating joint.</p>
</section>
<section id="create-the-tree-structure">
<h2>2. Create the tree structure<a class="headerlink" href="#create-the-tree-structure" title="Permalink to this heading"></a></h2>
<p>The robot in figure 1 is a tree structure. Let’s start very simple, and create a description of that
tree structure, without worrying about the dimensions etc. Create a file called workcell.urdf in the urdf folder of ur_robot_description package:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;custom_robot&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://www.ros.org/wiki/xacro&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;link1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;link2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;link3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/joint&gt;</span>
<span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link3&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.5&quot;</span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/joint&gt;</span>
<span class="nt">&lt;/robot&gt;</span>
</pre></div>
</div>
<p>So, just creating the structure is very simple! Now let’s see if we can get this urdf file parsed. Run the check command to see if the syntax is correct:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>check_urdf<span class="w"> </span>robot.urdf
</pre></div>
</div>
</section>
<section id="add-dimensions">
<h2>3. Add dimensions<a class="headerlink" href="#add-dimensions" title="Permalink to this heading"></a></h2>
<p>To add dimensions to our tree, we have to specify the offset from a link to the joint(s) of its
children. To accomplish this, we will add the feld <origin> to each of the joints.
Joint1 is offset in the Z-direction from link1. So, we need to add the following <origin> element:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Repeat this for every joint element of the URDF. Now run it through the parser and check for
syntax with the command shown above.</p>
</section>
<section id="completing-the-kinematics">
<h2>4. Completing the kinematics<a class="headerlink" href="#completing-the-kinematics" title="Permalink to this heading"></a></h2>
<p>We need to specify around which axis the joints rotate. Once we add that, we actually have a
full kinematic model of this robot! We need to add the <axis> element to each joint. The axis
specifies the rotational axis in the local frame.
Joint1, you see it rotates around the positive Y-axis. So, simply add the following to the joint
element:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Repeat this for every joint element of the URDF. Now run it through the parser and check for
syntax with the command shown above.
That’s it, you created your first URDF robot description!
Now you can try to visualize the
kinematic chain described in the URDF using graphiz:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>src
urdf_to_graphiz<span class="w"> </span>ur5e_cell/ur5e_cell_description/urdf/workcell.urdf<span class="w"> </span>
</pre></div>
</div>
<p>You can then open the generated pdf on the host machine in the src workspace folder.</p>
<p>To visualize and control this model, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>..
colcon<span class="w"> </span>build
ros2<span class="w"> </span>launch<span class="w"> </span>ur5e_cell_description<span class="w"> </span>view_ur_cell.launch.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you always run <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code> after you make changes to the URDF file.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you always run <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code> in the root folder of the workspace. In our case <code class="docutils literal notranslate"><span class="pre">/install/ws/</span></code>.</p>
</div>
<p>However now this will also pop up a GUI that allows you to control the values of all the non-
fixed joints. Play with the model and see how it moves. Then, we can take a look at how we
accomplished this.</p>
<p><strong>You’ll need to set link1 as the Fixed Frame!</strong></p>
<p>As you move the sliders around in the GUI, the model moves in Rviz. How is this done? First
the GUI parses the URDF and finds all the non-fixed joints and their limits.
Then, it uses
the values of the sliders to publish sensor_msgs/JointState messages. Those are then used by
robot_state_publisher to calculate all of transforms between the different parts. The resulting
transform tree is then used to display all of the shapes in Rviz.</p>
</section>
<section id="cleanup">
<h2>Cleanup<a class="headerlink" href="#cleanup" title="Permalink to this heading"></a></h2>
<p>To clean up the workspace rename workcell.urdf.xacro to workcell.urdf.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../tech_setup/workshops/0.Setup_Environment.html" class="btn btn-neutral float-left" title="DEVELOPMENT ENVIRONEMNT SETUP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="2.Robot_workcell_composition.html" class="btn btn-neutral float-right" title="ROBOT WORKCELL COMPOSITION" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Christoph Hellmann Santos, Harshavardan Deshpande, Ragesh Ramachandran, Ruichao Wu.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>